import {Injectable} from '@angular/core';
import {Observable, of} from 'rxjs';
import {PriceEntry} from "../data-types/albion-price-data";

export const BASE_MAP: Record<string, string> = {
  ore: 'ORE',
  fiber: 'FIBER',
  hide: 'HIDE',
  cloth: 'CLOTH',
  leather: 'LEATHER',
  plank: 'PLANKS',
  metal_bar: 'METALBAR',
  stone_block: 'STONEBLOCK'
};

@Injectable({providedIn: 'root'})
export class PricesService {


  static internalToApiId(id: string): string {
    const regex = /^([a-z_]+)_(\\d)(?:_level(\\d+))?$/i
    const m = regex.exec(id);
    if (!m) return id;
    const base = BASE_MAP[m[1]];
    if (!base) return id;
    const tier = `T${m[2]}`;
    const level = m[3] ? Number(m[3]) : 0;
    if (level > 0) return `${tier}_${base}_LEVEL${level}@${level}`;
    return `${tier}_${base}`;
  }

  getPrices(uniqueName: string): Observable<PriceEntry[]> {
    return of([]);
  }
}
